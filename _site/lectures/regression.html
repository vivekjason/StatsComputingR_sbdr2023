<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vivek Jason">

<title>Statistical Computing in R 2023 - An Introduction to Regression in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Statistical Computing in R 2023</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">Home</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures" role="button" data-bs-toggle="dropdown" aria-expanded="false">Lectures</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-lectures">    
        <li>
    <a class="dropdown-item" href="//lectures/introduction_R.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//lectures/data_wranggling.html">
 <span class="dropdown-text">Data Wranggling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//lectures/data_viz.html">
 <span class="dropdown-text">Data Visulisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//lectures/inferential_stats.html">
 <span class="dropdown-text">Inferential Statistics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//lectures/regression.html">
 <span class="dropdown-text">Regression</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">Tutorials</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="//tutorials/data_wranggling_tutorial.html">
 <span class="dropdown-text">Data Wranggling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//tutorials/data_viz_tutorial.html">
 <span class="dropdown-text">Data Visulisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//tutorials/inferential_stats_tutorial.html">
 <span class="dropdown-text">Inferential Statistics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//tutorials/regression_tutorial.html">
 <span class="dropdown-text">Regression</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-solutions" role="button" data-bs-toggle="dropdown" aria-expanded="false">Solutions</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-solutions">    
        <li>
    <a class="dropdown-item" href="//solutions/data_wranggling_solutions.html">
 <span class="dropdown-text">Data Wranggling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//solutions/data_viz_solutions.html">
 <span class="dropdown-text">Data Visulisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//solutions/inferential_stats_solutions.html">
 <span class="dropdown-text">Inferential Statistics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="//solutions/regression_solutions.html">
 <span class="dropdown-text">Regression</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vivekjason"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/vivekjason87"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link active" data-scroll-target="#section"><img src="../images/banner.png" class="img-fluid"></a>
  <ul class="collapse">
  <li><a href="#linear-regression" id="toc-linear-regression" class="nav-link" data-scroll-target="#linear-regression"><strong>Linear regression</strong></a></li>
  <li><a href="#model-building" id="toc-model-building" class="nav-link" data-scroll-target="#model-building">Model building</a></li>
  <li><a href="#gtsummary-and-regression" id="toc-gtsummary-and-regression" class="nav-link" data-scroll-target="#gtsummary-and-regression"><code>gtsummary()</code> and regression</a></li>
  <li><a href="#model-evaluation-in-r-using-the-performance-and-car" id="toc-model-evaluation-in-r-using-the-performance-and-car" class="nav-link" data-scroll-target="#model-evaluation-in-r-using-the-performance-and-car">Model evaluation in r using the <code>performance()</code> and <code>car()</code></a></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">An Introduction to Regression in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vivek Jason </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"><img src="../images/banner.png" class="img-fluid"></h2>
<p>Regression analysis is a powerful statistical tool that allows researchers to investigate relationships between variables, specifically the relationship between a dependent variable and one or more independent variables. In healthcare data, regression analysis is used for numerous purposes:</p>
<ol type="1">
<li><p><strong>Prediction and Forecasting:</strong> Regression analysis can help forecast future health trends based on historical data. For example, it can predict the prevalence of a disease based on risk factors.</p></li>
<li><p><strong>Identifying Risk Factors:</strong> Regression analysis can be used to identify risk factors for diseases. For example, it can help determine whether smoking is a significant risk factor for lung cancer.</p></li>
<li><p><strong>Cost-effectiveness Analysis:</strong> In health economics, regression analysis can help analyze the cost-effectiveness of different treatments or interventions.</p></li>
<li><p><strong>Evaluating Treatment Effects:</strong> Regression can be used to compare the effects of different treatments in a population, which can inform healthcare decision-making.</p></li>
</ol>
<p>Here are some important regression models used in healthcare data analysis:</p>
<ol type="1">
<li><p><strong>Linear Regression:</strong> Linear regression is used when the dependent variable is continuous. For example, it could be used to examine the relationship between age (independent variable) and blood pressure (dependent variable).</p></li>
<li><p><strong>Logistic Regression:</strong> Logistic regression is used when the dependent variable is binary, i.e., it has two possible outcomes. It is often used to identify risk factors for diseases. For example, it could be used to investigate the impact of various factors (like age, sex, BMI, smoking status) on the likelihood of developing heart disease (Yes/No).</p></li>
<li><p><strong>Cox Regression:</strong> Cox regression, or proportional hazards regression, is a type of survival analysis used to investigate the effect of various factors on the time a specified event takes to happen. For example, it can be used to study the survival time of patients after being diagnosed with a certain disease.</p></li>
<li><p><strong>Poisson Regression:</strong> Poisson regression is used for count data. For instance, it can model the number of hospital admissions over a certain period.</p></li>
<li><p><strong>Multilevel Regression:</strong> Multilevel (or hierarchical) regression is used when data is grouped, such as patients within hospitals. This takes into account the potential correlation of patients within the same group.</p></li>
<li><p><strong>Nonlinear Regression:</strong> Nonlinear regression can be used when the relationship between the independent and dependent variables is not linear.</p></li>
</ol>
<p>Remember, selecting the appropriate regression model depends largely on the type of data at hand and the specific research question. We will be introducing the approach to univariable and multivariable linear and logistic regression analysis in R.</p>
<p>Before we start lets get some important packages loaded</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>required_packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"tidyverse"</span>, <span class="st">"lubridate"</span>, <span class="st">"gtsummary"</span>, <span class="st">"broom"</span>, <span class="st">"performance"</span>, <span class="st">"see"</span>, <span class="st">"flextable"</span>, <span class="st">"stats"</span>, <span class="st">"car"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>not_installed <span class="ot">&lt;-</span> required_packages[<span class="sc">!</span>(required_packages <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[ , <span class="st">"Package"</span>])]    </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(not_installed)) <span class="fu">install.packages</span>(not_installed)                                           </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">lapply</span>(required_packages, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: tidyverse</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors
Loading required package: gtsummary

Loading required package: broom

Loading required package: performance

Loading required package: see

Loading required package: flextable


Attaching package: 'flextable'


The following objects are masked from 'package:gtsummary':

    as_flextable, continuous_summary


The following object is masked from 'package:purrr':

    compose


Loading required package: car

Loading required package: carData


Attaching package: 'car'


The following object is masked from 'package:dplyr':

    recode


The following object is masked from 'package:purrr':

    some</code></pre>
</div>
</div>
<p>Lets call in the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>c19_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://raw.githubusercontent.com/MoH-Malaysia/covid19-public/main/epidemic/linelist/linelist_deaths.csv"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#create a sequence of numbers to represent time</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>c19_df <span class="ot">&lt;-</span> c19_df <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_index =</span> <span class="fu">cur_group_id</span>(),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_cat=</span><span class="fu">ifelse</span>(age<span class="sc">&lt;</span><span class="dv">20</span>, <span class="st">"Less than 20"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">ifelse</span>(age <span class="sc">%in%</span> <span class="dv">20</span><span class="sc">:</span><span class="dv">40</span>, <span class="st">"20-40"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">ifelse</span>(age <span class="sc">%in%</span> <span class="dv">40</span><span class="sc">:</span><span class="dv">60</span>, <span class="st">"40-60"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ifelse</span>(age <span class="sc">%in%</span> <span class="dv">60</span><span class="sc">:</span><span class="dv">80</span>, <span class="st">"60:80"</span>, <span class="st">"&gt;80"</span>))))) <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Just to be consistent we what I said yesterday- before diving into the data always always skim the data first to get a quick feels</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>c19_df <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  skimr<span class="sc">::</span><span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">37152</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 20%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1004</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">date_announced</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1000</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">date_positive</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">999</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">date_dose1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">22437</td>
<td style="text-align: right;">298</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">date_dose2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">28034</td>
<td style="text-align: right;">267</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">date_dose3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">35719</td>
<td style="text-align: right;">161</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">brand1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">22437</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">brand2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">28034</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">brand3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">35719</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">age_cat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">62.65</td>
<td style="text-align: right;">16.59</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">130</td>
<td style="text-align: left;">▁▃▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.58</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▆▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bid</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▇▁▁▁▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">malaysian</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.89</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">comorb</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.79</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">▂▁▁▁▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">date_index</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">419.07</td>
<td style="text-align: right;">122.14</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">362</td>
<td style="text-align: right;">393</td>
<td style="text-align: right;">444</td>
<td style="text-align: right;">1004</td>
<td style="text-align: left;">▁▇▆▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="linear-regression" class="level3">
<h3 class="anchored" data-anchor-id="linear-regression"><strong>Linear regression</strong></h3>
<p>The R function <a href="https://rdrr.io/r/stats/lm.html"><code>lm()</code></a> perform linear regression, assessing the relationship between numeric response and explanatory variables that are assumed to have a linear relationship.</p>
<p>Provide the equation as a formula, with the response and explanatory column names separated by a tilde <code>~</code>. Also, specify the dataset to <code>data =</code>. Define the model results as an R object, to use later.</p>
<section id="univariate-linear-regression" class="level4">
<h4 class="anchored" data-anchor-id="univariate-linear-regression">Univariate linear regression</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>lm_results <span class="ot">&lt;-</span> <span class="fu">lm</span>(age <span class="sc">~</span> malaysian, <span class="at">data =</span> c19_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can then run <a href="https://rdrr.io/r/base/summary.html"><code>summary()</code></a> on the model results to see the coefficients (Estimates), P-value, residuals, and other measures.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = age ~ malaysian, data = c19_df)

Residuals:
   Min     1Q Median     3Q    Max 
-64.26 -10.26   0.74  11.74  80.53 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  49.4727     0.2509  197.14   &lt;2e-16 ***
malaysian    14.7875     0.2658   55.63   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 15.94 on 37150 degrees of freedom
Multiple R-squared:  0.07691,   Adjusted R-squared:  0.07689 
F-statistic:  3095 on 1 and 37150 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Alternatively you can use the <code>tidy()</code> function from the <strong>broom</strong> package to pull the results in to a table. What the results tell us is that Malaysians (change from 0 to 1) the age of COVID-19 death increases by 14.8 years and this is statistically significant (p&lt;0.01).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept)     49.5     0.251     197.        0
2 malaysian       14.8     0.266      55.6       0</code></pre>
</div>
</div>
<p>You can then also use this regression to add it to a <strong>ggplot</strong>, to do this we first pull the points for the observed data and the fitted line in to one data frame using the <code>augment()</code> function from <strong>broom</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## pull the regression points and observed data in to one dataset</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">augment</span>(lm_results)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="do">## plot the data using age as the x-axis </span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(points, <span class="fu">aes</span>(<span class="at">x =</span> malaysian)) <span class="sc">+</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## add points for height </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> age)) <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## add your regression line </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted), <span class="at">colour =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="regression_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>When using a categorical variable as the predictor as we did above the plots can appear somewhat difficult to understand. We can try using a continuous on continuous method and implement it more simpler directly in ggplot and it should look like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## add your data to a plot </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>(c19_df, <span class="fu">aes</span>(<span class="at">x =</span> date_index, <span class="at">y =</span> age)) <span class="sc">+</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## show points</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## add a linear regression </span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="regression_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</section>
<section id="multivariable-linear-regression" class="level4">
<h4 class="anchored" data-anchor-id="multivariable-linear-regression">Multivariable linear regression</h4>
<p>There is almost no difference when carrying out multivariable linear regression, instead we just add on the expression <code>+</code> to add more variables to the equation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>lm_results <span class="ot">&lt;-</span> <span class="fu">lm</span>(age <span class="sc">~</span> malaysian <span class="sc">+</span> bid <span class="sc">+</span> male <span class="sc">+</span> state <span class="sc">+</span> comorb, </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> c19_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check the output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 5
   term                   estimate std.error statistic  p.value
   &lt;chr&gt;                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)             47.6        0.380  125.     0       
 2 malaysian               12.9        0.284   45.3    0       
 3 bid                     -1.25       0.209   -5.96   2.57e- 9
 4 male                    -1.41       0.165   -8.58   9.74e-18
 5 stateKedah               1.48       0.376    3.95   7.86e- 5
 6 stateKelantan            4.94       0.474   10.4    2.18e-25
 7 stateMelaka              0.763      0.504    1.51   1.30e- 1
 8 stateNegeri Sembilan     3.19       0.459    6.95   3.80e-12
 9 statePahang              1.92       0.537    3.57   3.56e- 4
10 statePerak               5.27       0.407   12.9    3.65e-38
11 statePerlis              6.10       1.13     5.38   7.61e- 8
12 statePulau Pinang        5.42       0.412   13.2    1.88e-39
13 stateSabah               6.45       0.362   17.8    1.26e-70
14 stateSarawak             6.06       0.436   13.9    6.18e-44
15 stateSelangor            0.0115     0.274    0.0422 9.66e- 1
16 stateTerengganu          3.05       0.569    5.36   8.55e- 8
17 stateW.P. Kuala Lumpur   2.96       0.373    7.93   2.21e-15
18 stateW.P. Labuan         0.245      1.26     0.194  8.46e- 1
19 stateW.P. Putrajaya      2.96       2.92     1.01   3.10e- 1
20 comorb                   3.00       0.210   14.3    4.79e-46</code></pre>
</div>
</div>
<p>Pretty simple right!</p>
</section>
<section id="univariate-logistic-regression" class="level4">
<h4 class="anchored" data-anchor-id="univariate-logistic-regression">Univariate logistic regression</h4>
<p>The function <a href="https://rdrr.io/r/stats/glm.html"><code>glm()</code></a> from the <strong>stats</strong> package (part of <strong>base</strong> R) is used to fit Generalized Linear Models (GLM). <a href="https://rdrr.io/r/stats/glm.html"><code>glm()</code></a> can be used for univariate and multivariable logistic regression (e.g.&nbsp;to get Odds Ratios). Here are the core parts:</p>
<ul>
<li><p><code>formula =</code> The model is provided to <a href="https://rdrr.io/r/stats/glm.html"><code>glm()</code></a> as an equation, with the outcome on the left and explanatory variables on the right of a tilde <code>~</code>.</p></li>
<li><p><code>family =</code> This determines the type of model to run. For logistic regression, use <code>family = "binomial"</code>, for poisson use <code>family = "poisson"</code>. Other examples are in the table below.</p></li>
<li><p><code>data =</code> Specify your data frame</p></li>
</ul>
<p>If necessary, you can also specify the link function via the syntax <code>family = familytype(link = "linkfunction"))</code>. You can read more in the documentation about other families and optional arguments such as <code>weights =</code> and <code>subset =</code> (<a href="https://rdrr.io/r/stats/glm.html"><code>?glm</code></a>).</p>
<table class="table">
<thead>
<tr class="header">
<th>Family</th>
<th>Default link function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"binomial"</code></td>
<td><code>(link = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"gaussian"</code></td>
<td><code>(link = "identity")</code></td>
</tr>
<tr class="odd">
<td><code>"Gamma"</code></td>
<td><code>(link = "inverse")</code></td>
</tr>
<tr class="even">
<td><code>"inverse.gaussian"</code></td>
<td><code>(link = "1/mu^2")</code></td>
</tr>
<tr class="odd">
<td><code>"poisson"</code></td>
<td><code>(link = "log")</code></td>
</tr>
<tr class="even">
<td><code>"quasi"</code></td>
<td><code>(link = "identity", variance = "constant")</code></td>
</tr>
<tr class="odd">
<td><code>"quasibinomial"</code></td>
<td><code>(link = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"quasipoisson"</code></td>
<td><code>(link = "log")</code></td>
</tr>
</tbody>
</table>
<p>When running <a href="https://rdrr.io/r/stats/glm.html"><code>glm()</code></a> it is most common to save the results as a named R object. Then you can print the results to your console using <a href="https://rdrr.io/r/base/summary.html"><code>summary()</code></a> as shown below, or perform other operations on the results (e.g.&nbsp;exponentiate). If you need to run a negative binomial regression you can use the <strong>MASS</strong> package; the <code>glm.nb()</code> uses the same syntax as <a href="https://rdrr.io/r/stats/glm.html"><code>glm()</code></a>. For a walk-through of different regressions, see the <a href="https://stats.idre.ucla.edu/other/dae/">UCLA stats page</a>. So lets try to run a logistic regression model first:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(malaysian <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> c19_df)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = malaysian ~ age_cat, family = "binomial", data = c19_df)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.7224   0.2231   0.2747   0.6605   0.7777  

Coefficients:
                    Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)          3.68075    0.08588  42.859  &lt; 2e-16 ***
age_cat20-40        -2.63967    0.09382 -28.135  &lt; 2e-16 ***
age_cat40-60        -2.26931    0.08895 -25.512  &lt; 2e-16 ***
age_cat60:80        -0.42226    0.09566  -4.414 1.01e-05 ***
age_catLess than 20 -2.19915    0.18614 -11.814  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 25526  on 37151  degrees of freedom
Residual deviance: 22412  on 37147  degrees of freedom
AIC: 22422

Number of Fisher Scoring iterations: 6</code></pre>
</div>
</div>
<p>Can you spot a potential issue in the summary above?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>c19_df <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_cat =</span> <span class="fu">fct_relevel</span>(age_cat, <span class="st">"Less than 20"</span>, <span class="at">after =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glm</span>(<span class="at">formula =</span> malaysian <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = malaysian ~ age_cat, family = "binomial", data = .)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.7224   0.2231   0.2747   0.6605   0.7777  

Coefficients:
             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)   1.48160    0.16514   8.972  &lt; 2e-16 ***
age_cat&gt;80    2.19915    0.18614  11.814  &lt; 2e-16 ***
age_cat20-40 -0.44052    0.16941  -2.600  0.00931 ** 
age_cat40-60 -0.07017    0.16676  -0.421  0.67394    
age_cat60:80  1.77689    0.17043  10.426  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 25526  on 37151  degrees of freedom
Residual deviance: 22412  on 37147  degrees of freedom
AIC: 22422

Number of Fisher Scoring iterations: 6</code></pre>
</div>
</div>
<p>Lets clean that up so we have a nice exponentiated and round up the hyper precise output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(malaysian <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> c19_df) <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>        <span class="co"># exponentiate and produce CIs</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))  <span class="co"># round all numeric columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `across(where(is.numeric), round, digits = 2)`.
Caused by warning:
! The `...` argument of `across()` is deprecated as of dplyr 1.1.0.
Supply arguments directly to `.fns` through an anonymous function instead.

  # Previously
  across(a:b, mean, na.rm = TRUE)

  # Now
  across(a:b, \(x) mean(x, na.rm = TRUE))</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  term                estimate std.error statistic p.value conf.low conf.high
  &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)            39.7       0.09     42.9        0    33.7      47.2 
2 age_cat20-40            0.07      0.09    -28.1        0     0.06      0.09
3 age_cat40-60            0.1       0.09    -25.5        0     0.09      0.12
4 age_cat60:80            0.66      0.1      -4.41       0     0.54      0.79
5 age_catLess than 20     0.11      0.19    -11.8        0     0.08      0.16</code></pre>
</div>
</div>
</section>
<section id="multivariable-logistic-regression" class="level4">
<h4 class="anchored" data-anchor-id="multivariable-logistic-regression">Multivariable logistic regression</h4>
<p>The expressions utilised are exactly the same as in the multivariable linear regression model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>log_reg <span class="ot">&lt;-</span> <span class="fu">glm</span>(malaysian <span class="sc">~</span> age_cat <span class="sc">+</span> bid <span class="sc">+</span> comorb <span class="sc">+</span> male <span class="sc">+</span> state, </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> c19_df)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(log_reg, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 7
   term                estimate std.error statistic   p.value conf.low conf.high
   &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)          38.4       0.112      32.5  2.49e-232  30.9      48.0   
 2 age_cat20-40          0.0709    0.101     -26.3  3.00e-152   0.0580    0.0861
 3 age_cat40-60          0.106     0.0943    -23.8  9.11e-125   0.0881    0.128 
 4 age_cat60:80          0.535     0.100      -6.26 3.75e- 10   0.438     0.648 
 5 age_catLess than 20   0.142     0.205      -9.51 1.94e- 21   0.0955    0.214 
 6 bid                   0.282     0.0398    -31.8  2.41e-221   0.261     0.305 
 7 comorb                3.45      0.0396     31.3  1.59e-215   3.20      3.73  
 8 male                  1.09      0.0394      2.29 2.20e-  2   1.01      1.18  
 9 stateKedah            3.37      0.139       8.76 1.88e- 18   2.58      4.45  
10 stateKelantan         2.75      0.194       5.22 1.76e-  7   1.91      4.09  
# ℹ 13 more rows</code></pre>
</div>
</div>
<p>If you want to include two variables and an interaction between them you can separate them with an asterisk <code>*</code> instead of a <code>+</code>. Separate them with a colon <code>:</code> if you are only specifying the interaction. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>log_intrx_reg <span class="ot">&lt;-</span> <span class="fu">glm</span>(malaysian <span class="sc">~</span> age_cat<span class="sc">*</span>bid <span class="sc">+</span> comorb <span class="sc">+</span> male <span class="sc">+</span> state, </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> c19_df)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(log_reg, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 7
   term                estimate std.error statistic   p.value conf.low conf.high
   &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)          38.4       0.112      32.5  2.49e-232  30.9      48.0   
 2 age_cat20-40          0.0709    0.101     -26.3  3.00e-152   0.0580    0.0861
 3 age_cat40-60          0.106     0.0943    -23.8  9.11e-125   0.0881    0.128 
 4 age_cat60:80          0.535     0.100      -6.26 3.75e- 10   0.438     0.648 
 5 age_catLess than 20   0.142     0.205      -9.51 1.94e- 21   0.0955    0.214 
 6 bid                   0.282     0.0398    -31.8  2.41e-221   0.261     0.305 
 7 comorb                3.45      0.0396     31.3  1.59e-215   3.20      3.73  
 8 male                  1.09      0.0394      2.29 2.20e-  2   1.01      1.18  
 9 stateKedah            3.37      0.139       8.76 1.88e- 18   2.58      4.45  
10 stateKelantan         2.75      0.194       5.22 1.76e-  7   1.91      4.09  
# ℹ 13 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="model-building" class="level3">
<h3 class="anchored" data-anchor-id="model-building">Model building</h3>
<p>You can build your model step-by-step, saving various models that include certain explanatory variables. You can compare these models with likelihood-ratio tests using <code>lrtest()</code> from the package <strong>lmtest</strong>, as below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(malaysian <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> c19_df)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(malaysian <span class="sc">~</span> age_cat <span class="sc">+</span> bid, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> c19_df)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>lmtest<span class="sc">::</span><span class="fu">lrtest</span>(model1, model2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: malaysian ~ age_cat
Model 2: malaysian ~ age_cat + bid
  #Df LogLik Df  Chisq Pr(&gt;Chisq)    
1   5 -11206                         
2   6 -10375  1 1661.8  &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>If you prefer to instead leverage the computation available within you processor we can instead take the model object and apply the <a href="https://rdrr.io/r/stats/step.html"><code>step()</code></a> function from the <strong>stats</strong> package. Specify which variable selection direction you want use when building the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">## choose a model using forward selection based on AIC</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## you can also do "backward" or "both" by adjusting the direction</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>final_log_reg <span class="ot">&lt;-</span> log_reg <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step</span>(<span class="at">direction =</span> <span class="st">"both"</span>, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check the best fitting models based on both a backward and forward method</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>log_tab_base <span class="ot">&lt;-</span> final_log_reg <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>  <span class="do">## get a tidy dataframe of estimates </span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))          <span class="do">## round </span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#check</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>log_tab_base</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 7
   term                estimate std.error statistic p.value conf.low conf.high
   &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)            38.4       0.11     32.5     0       31.0      48.0 
 2 age_cat20-40            0.07      0.1     -26.3     0        0.06      0.09
 3 age_cat40-60            0.11      0.09    -23.8     0        0.09      0.13
 4 age_cat60:80            0.53      0.1      -6.26    0        0.44      0.65
 5 age_catLess than 20     0.14      0.21     -9.51    0        0.1       0.21
 6 bid                     0.28      0.04    -31.8     0        0.26      0.31
 7 comorb                  3.45      0.04     31.3     0        3.2       3.73
 8 male                    1.09      0.04      2.29    0.02     1.01      1.18
 9 stateKedah              3.37      0.14      8.76    0        2.58      4.45
10 stateKelantan           2.75      0.19      5.22    0        1.91      4.09
# ℹ 13 more rows</code></pre>
</div>
</div>
</section>
<section id="gtsummary-and-regression" class="level3">
<h3 class="anchored" data-anchor-id="gtsummary-and-regression"><code>gtsummary()</code> and regression</h3>
<p>My favourite package again. The <strong>gtsummary</strong> package provides the <code>tbl_regression()</code> function, which will take the outputs from a regression (<a href="https://rdrr.io/r/stats/glm.html"><code>glm()</code></a> in this case) and produce an nice summary table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## show results table of final regression </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>mv_tab <span class="ot">&lt;-</span> <span class="fu">tbl_regression</span>(final_log_reg, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#check</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>mv_tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="rkplmocuvk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#rkplmocuvk) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#rkplmocuvk) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#rkplmocuvk) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#rkplmocuvk) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#rkplmocuvk) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#rkplmocuvk) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#rkplmocuvk) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#rkplmocuvk) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#rkplmocuvk) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#rkplmocuvk) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#rkplmocuvk) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#rkplmocuvk) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#rkplmocuvk) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rkplmocuvk) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#rkplmocuvk) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#rkplmocuvk) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rkplmocuvk) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#rkplmocuvk) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rkplmocuvk) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#rkplmocuvk) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rkplmocuvk) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#rkplmocuvk) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rkplmocuvk) .gt_left {
  text-align: left;
}

:where(#rkplmocuvk) .gt_center {
  text-align: center;
}

:where(#rkplmocuvk) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#rkplmocuvk) .gt_font_normal {
  font-weight: normal;
}

:where(#rkplmocuvk) .gt_font_bold {
  font-weight: bold;
}

:where(#rkplmocuvk) .gt_font_italic {
  font-style: italic;
}

:where(#rkplmocuvk) .gt_super {
  font-size: 65%;
}

:where(#rkplmocuvk) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#rkplmocuvk) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#rkplmocuvk) .gt_indent_1 {
  text-indent: 5px;
}

:where(#rkplmocuvk) .gt_indent_2 {
  text-indent: 10px;
}

:where(#rkplmocuvk) .gt_indent_3 {
  text-indent: 15px;
}

:where(#rkplmocuvk) .gt_indent_4 {
  text-indent: 20px;
}

:where(#rkplmocuvk) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">age_cat</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;&gt;80</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;20-40</td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.06, 0.09</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;40-60</td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">0.09, 0.13</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;60:80</td>
<td class="gt_row gt_center">0.53</td>
<td class="gt_row gt_center">0.44, 0.65</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Less than 20</td>
<td class="gt_row gt_center">0.14</td>
<td class="gt_row gt_center">0.10, 0.21</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">bid</td>
<td class="gt_row gt_center">0.28</td>
<td class="gt_row gt_center">0.26, 0.31</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">comorb</td>
<td class="gt_row gt_center">3.45</td>
<td class="gt_row gt_center">3.20, 3.73</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">male</td>
<td class="gt_row gt_center">1.09</td>
<td class="gt_row gt_center">1.01, 1.18</td>
<td class="gt_row gt_center">0.022</td></tr>
    <tr><td class="gt_row gt_left">state</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Johor</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Kedah</td>
<td class="gt_row gt_center">3.37</td>
<td class="gt_row gt_center">2.58, 4.45</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Kelantan</td>
<td class="gt_row gt_center">2.75</td>
<td class="gt_row gt_center">1.91, 4.09</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Melaka</td>
<td class="gt_row gt_center">2.22</td>
<td class="gt_row gt_center">1.61, 3.14</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Negeri Sembilan</td>
<td class="gt_row gt_center">1.30</td>
<td class="gt_row gt_center">1.00, 1.71</td>
<td class="gt_row gt_center">0.055</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Pahang</td>
<td class="gt_row gt_center">1.86</td>
<td class="gt_row gt_center">1.33, 2.65</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Perak</td>
<td class="gt_row gt_center">2.85</td>
<td class="gt_row gt_center">2.11, 3.92</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Perlis</td>
<td class="gt_row gt_center">2.75</td>
<td class="gt_row gt_center">1.10, 9.25</td>
<td class="gt_row gt_center">0.057</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Pulau Pinang</td>
<td class="gt_row gt_center">0.81</td>
<td class="gt_row gt_center">0.66, 1.00</td>
<td class="gt_row gt_center">0.044</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Sabah</td>
<td class="gt_row gt_center">0.26</td>
<td class="gt_row gt_center">0.23, 0.31</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Sarawak</td>
<td class="gt_row gt_center">4.49</td>
<td class="gt_row gt_center">2.96, 7.15</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Selangor</td>
<td class="gt_row gt_center">0.47</td>
<td class="gt_row gt_center">0.41, 0.54</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Terengganu</td>
<td class="gt_row gt_center">3.16</td>
<td class="gt_row gt_center">1.96, 5.44</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Kuala Lumpur</td>
<td class="gt_row gt_center">0.40</td>
<td class="gt_row gt_center">0.34, 0.47</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Labuan</td>
<td class="gt_row gt_center">0.44</td>
<td class="gt_row gt_center">0.28, 0.72</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Putrajaya</td>
<td class="gt_row gt_center">34,834</td>
<td class="gt_row gt_center">340, 10,238,707,683,122,566</td>
<td class="gt_row gt_center">&gt;0.9</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><sup class="gt_footnote_marks">1</sup> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>Its so good! But it doesn’t end there. <code>tbl_uvregression()</code> from the <strong>gtsummary</strong> package produces a table of univariate regression results. We select only the necessary columns from the <code>linelist</code> (explanatory variables and the outcome variable) and pipe them into <code>tbl_uvregression()</code>. We are going to run univariate regression on each of the columns we defined as <code>explanatory_vars</code> in the data</p>
<p>Within the function itself, we provide the <code>method =</code> as <code>glm</code> (no quotes), the <code>y =</code> outcome column (<code>outcome</code>), specify to <code>method.args =</code> that we want to run logistic regression via <code>family = binomial</code>, and we tell it to exponentiate the results.</p>
<p>The output is HTML and contains the counts</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">## define variables of interest </span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"bid"</span>, <span class="st">"male"</span>, <span class="st">"comorb"</span>, <span class="st">"age_cat"</span>, <span class="st">"state"</span>)<span class="co">#lets leave state ut to increase the computation</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#cteate a data subset and run the regression</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>univ_tab <span class="ot">&lt;-</span> c19_df <span class="sc">%&gt;%</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(explanatory_vars, malaysian) <span class="sc">%&gt;%</span> <span class="do">## select variables of interest</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_uvregression</span>(                         <span class="do">## produce univariate table</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> glm,                           <span class="do">## define regression want to run (generalised linear model)</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> malaysian,                            <span class="do">## define outcome variable</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> binomial),  <span class="do">## define what type of glm want to run (logistic)</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">exponentiate =</span> <span class="cn">TRUE</span>                     <span class="do">## exponentiate to produce odds ratios (rather than log odds)</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="do">## view univariate results table </span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>univ_tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="pwjumyzyzc" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#pwjumyzyzc) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#pwjumyzyzc) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#pwjumyzyzc) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#pwjumyzyzc) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#pwjumyzyzc) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#pwjumyzyzc) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#pwjumyzyzc) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#pwjumyzyzc) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#pwjumyzyzc) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#pwjumyzyzc) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#pwjumyzyzc) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#pwjumyzyzc) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#pwjumyzyzc) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#pwjumyzyzc) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#pwjumyzyzc) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#pwjumyzyzc) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#pwjumyzyzc) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#pwjumyzyzc) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#pwjumyzyzc) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#pwjumyzyzc) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#pwjumyzyzc) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#pwjumyzyzc) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#pwjumyzyzc) .gt_left {
  text-align: left;
}

:where(#pwjumyzyzc) .gt_center {
  text-align: center;
}

:where(#pwjumyzyzc) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#pwjumyzyzc) .gt_font_normal {
  font-weight: normal;
}

:where(#pwjumyzyzc) .gt_font_bold {
  font-weight: bold;
}

:where(#pwjumyzyzc) .gt_font_italic {
  font-style: italic;
}

:where(#pwjumyzyzc) .gt_super {
  font-size: 65%;
}

:where(#pwjumyzyzc) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#pwjumyzyzc) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#pwjumyzyzc) .gt_indent_1 {
  text-indent: 5px;
}

:where(#pwjumyzyzc) .gt_indent_2 {
  text-indent: 10px;
}

:where(#pwjumyzyzc) .gt_indent_3 {
  text-indent: 15px;
}

:where(#pwjumyzyzc) .gt_indent_4 {
  text-indent: 20px;
}

:where(#pwjumyzyzc) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">bid</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center">0.20</td>
<td class="gt_row gt_center">0.19, 0.22</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">male</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.87, 0.99</td>
<td class="gt_row gt_center">0.029</td></tr>
    <tr><td class="gt_row gt_left">comorb</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center">5.61</td>
<td class="gt_row gt_center">5.24, 6.00</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">age_cat</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;&gt;80</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;20-40</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.06, 0.09</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;40-60</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.10</td>
<td class="gt_row gt_center">0.09, 0.12</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;60:80</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.66</td>
<td class="gt_row gt_center">0.54, 0.79</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Less than 20</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">0.08, 0.16</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">state</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Johor</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Kedah</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">3.21</td>
<td class="gt_row gt_center">2.49, 4.20</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Kelantan</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">3.65</td>
<td class="gt_row gt_center">2.57, 5.37</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Melaka</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">2.22</td>
<td class="gt_row gt_center">1.63, 3.10</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Negeri Sembilan</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.51</td>
<td class="gt_row gt_center">1.19, 1.95</td>
<td class="gt_row gt_center">0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Pahang</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.98</td>
<td class="gt_row gt_center">1.45, 2.79</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Perak</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">3.40</td>
<td class="gt_row gt_center">2.55, 4.61</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Perlis</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">4.08</td>
<td class="gt_row gt_center">1.72, 13.3</td>
<td class="gt_row gt_center">0.006</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Pulau Pinang</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.85</td>
<td class="gt_row gt_center">0.71, 1.03</td>
<td class="gt_row gt_center">0.094</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Sabah</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.34</td>
<td class="gt_row gt_center">0.29, 0.38</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Sarawak</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">6.45</td>
<td class="gt_row gt_center">4.32, 10.1</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Selangor</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.41</td>
<td class="gt_row gt_center">0.36, 0.46</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Terengganu</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">4.37</td>
<td class="gt_row gt_center">2.76, 7.43</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Kuala Lumpur</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.33</td>
<td class="gt_row gt_center">0.29, 0.38</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Labuan</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.39</td>
<td class="gt_row gt_center">0.26, 0.61</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Putrajaya</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">65,203</td>
<td class="gt_row gt_center">434, 166,983,382,533,055,616</td>
<td class="gt_row gt_center">&gt;0.9</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">1</sup> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>Now for some magic</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="do">## combine with univariate results </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>mv_merge <span class="ot">&lt;-</span> <span class="fu">tbl_merge</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">tbls =</span> <span class="fu">list</span>(univ_tab, mv_tab),                          <span class="co"># combine</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">tab_spanner =</span> <span class="fu">c</span>(<span class="st">"**Univariate**"</span>, <span class="st">"**Multivariable**"</span>)) <span class="co"># set header names</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#check</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>mv_merge</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="govcfqdvls" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#govcfqdvls) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#govcfqdvls) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#govcfqdvls) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#govcfqdvls) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#govcfqdvls) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#govcfqdvls) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#govcfqdvls) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#govcfqdvls) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#govcfqdvls) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#govcfqdvls) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#govcfqdvls) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#govcfqdvls) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#govcfqdvls) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#govcfqdvls) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#govcfqdvls) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#govcfqdvls) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#govcfqdvls) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#govcfqdvls) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#govcfqdvls) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#govcfqdvls) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#govcfqdvls) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#govcfqdvls) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#govcfqdvls) .gt_left {
  text-align: left;
}

:where(#govcfqdvls) .gt_center {
  text-align: center;
}

:where(#govcfqdvls) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#govcfqdvls) .gt_font_normal {
  font-weight: normal;
}

:where(#govcfqdvls) .gt_font_bold {
  font-weight: bold;
}

:where(#govcfqdvls) .gt_font_italic {
  font-style: italic;
}

:where(#govcfqdvls) .gt_super {
  font-size: 65%;
}

:where(#govcfqdvls) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#govcfqdvls) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#govcfqdvls) .gt_indent_1 {
  text-indent: 5px;
}

:where(#govcfqdvls) .gt_indent_2 {
  text-indent: 10px;
}

:where(#govcfqdvls) .gt_indent_3 {
  text-indent: 15px;
}

:where(#govcfqdvls) .gt_indent_4 {
  text-indent: 20px;
}

:where(#govcfqdvls) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col"><strong>Characteristic</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup">
        <span class="gt_column_spanner"><strong>Univariate</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup">
        <span class="gt_column_spanner"><strong>Multivariable</strong></span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">bid</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center">0.20</td>
<td class="gt_row gt_center">0.19, 0.22</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.28</td>
<td class="gt_row gt_center">0.26, 0.31</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">male</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.87, 0.99</td>
<td class="gt_row gt_center">0.029</td>
<td class="gt_row gt_center">1.09</td>
<td class="gt_row gt_center">1.01, 1.18</td>
<td class="gt_row gt_center">0.022</td></tr>
    <tr><td class="gt_row gt_left">comorb</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center">5.61</td>
<td class="gt_row gt_center">5.24, 6.00</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">3.45</td>
<td class="gt_row gt_center">3.20, 3.73</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">age_cat</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;&gt;80</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;20-40</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.06, 0.09</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.06, 0.09</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;40-60</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.10</td>
<td class="gt_row gt_center">0.09, 0.12</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">0.09, 0.13</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;60:80</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.66</td>
<td class="gt_row gt_center">0.54, 0.79</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.53</td>
<td class="gt_row gt_center">0.44, 0.65</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Less than 20</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">0.08, 0.16</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.14</td>
<td class="gt_row gt_center">0.10, 0.21</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">state</td>
<td class="gt_row gt_center">37,152</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Johor</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Kedah</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">3.21</td>
<td class="gt_row gt_center">2.49, 4.20</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">3.37</td>
<td class="gt_row gt_center">2.58, 4.45</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Kelantan</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">3.65</td>
<td class="gt_row gt_center">2.57, 5.37</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">2.75</td>
<td class="gt_row gt_center">1.91, 4.09</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Melaka</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">2.22</td>
<td class="gt_row gt_center">1.63, 3.10</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">2.22</td>
<td class="gt_row gt_center">1.61, 3.14</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Negeri Sembilan</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.51</td>
<td class="gt_row gt_center">1.19, 1.95</td>
<td class="gt_row gt_center">0.001</td>
<td class="gt_row gt_center">1.30</td>
<td class="gt_row gt_center">1.00, 1.71</td>
<td class="gt_row gt_center">0.055</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Pahang</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.98</td>
<td class="gt_row gt_center">1.45, 2.79</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">1.86</td>
<td class="gt_row gt_center">1.33, 2.65</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Perak</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">3.40</td>
<td class="gt_row gt_center">2.55, 4.61</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">2.85</td>
<td class="gt_row gt_center">2.11, 3.92</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Perlis</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">4.08</td>
<td class="gt_row gt_center">1.72, 13.3</td>
<td class="gt_row gt_center">0.006</td>
<td class="gt_row gt_center">2.75</td>
<td class="gt_row gt_center">1.10, 9.25</td>
<td class="gt_row gt_center">0.057</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Pulau Pinang</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.85</td>
<td class="gt_row gt_center">0.71, 1.03</td>
<td class="gt_row gt_center">0.094</td>
<td class="gt_row gt_center">0.81</td>
<td class="gt_row gt_center">0.66, 1.00</td>
<td class="gt_row gt_center">0.044</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Sabah</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.34</td>
<td class="gt_row gt_center">0.29, 0.38</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.26</td>
<td class="gt_row gt_center">0.23, 0.31</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Sarawak</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">6.45</td>
<td class="gt_row gt_center">4.32, 10.1</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">4.49</td>
<td class="gt_row gt_center">2.96, 7.15</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Selangor</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.41</td>
<td class="gt_row gt_center">0.36, 0.46</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.47</td>
<td class="gt_row gt_center">0.41, 0.54</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Terengganu</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">4.37</td>
<td class="gt_row gt_center">2.76, 7.43</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">3.16</td>
<td class="gt_row gt_center">1.96, 5.44</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Kuala Lumpur</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.33</td>
<td class="gt_row gt_center">0.29, 0.38</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.40</td>
<td class="gt_row gt_center">0.34, 0.47</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Labuan</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.39</td>
<td class="gt_row gt_center">0.26, 0.61</td>
<td class="gt_row gt_center">&lt;0.001</td>
<td class="gt_row gt_center">0.44</td>
<td class="gt_row gt_center">0.28, 0.72</td>
<td class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;W.P. Putrajaya</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">65,203</td>
<td class="gt_row gt_center">434, 166,983,382,533,055,616</td>
<td class="gt_row gt_center">&gt;0.9</td>
<td class="gt_row gt_center">34,834</td>
<td class="gt_row gt_center">340, 10,238,707,683,122,566</td>
<td class="gt_row gt_center">&gt;0.9</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="8"><sup class="gt_footnote_marks">1</sup> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>One final piece of magic! We can export our publication ready regression table into a document. Lovely!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>mv_merge <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flex_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">save_as_docx</span>(<span class="at">path =</span> <span class="st">"regression.docx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="../images/blown.gif" class="img-fluid"></p>
</section>
<section id="model-evaluation-in-r-using-the-performance-and-car" class="level3">
<h3 class="anchored" data-anchor-id="model-evaluation-in-r-using-the-performance-and-car">Model evaluation in r using the <code>performance()</code> and <code>car()</code></h3>
<p>Lets just run through quickly how we can evaluate linear and logistics models in R.</p>
<section id="linear-model-evaluation" class="level4">
<h4 class="anchored" data-anchor-id="linear-model-evaluation">Linear model evaluation</h4>
<p><strong>Linearity and Homoscedasticity:</strong> These can be checked using a residuals vs fitted values plot.</p>
<p>For linearity, we expect to see no pattern or curve in the points, while for homoscedasticity, we expect the spread of residuals to be approximately constant across all levels of the independent variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(lm_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Normality of residuals:</strong> This can be checked using a QQ plot.</p>
<p>If the residuals are normally distributed, the points in the QQ plot will generally follow the straight line.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_normality</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Independence of residuals (No autocorrelation):</strong> This can be checked using the Durbin-Watson test.</p>
<p>If the test statistic is approximately 2, it indicates no autocorrelation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_autocorrelation</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>No multicollinearity:</strong> This can be checked using Variance Inflation Factor (VIF).</p>
<p>A VIF value greater than 5 (some suggest 10) might indicate problematic multicollinearity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_collinearity</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="logistic-model-evaluation" class="level4">
<h4 class="anchored" data-anchor-id="logistic-model-evaluation">Logistic model evaluation</h4>
<p><strong>Binary Outcome:</strong> Logistic regression requires the dependent variable to be binary or ordinal in ordinal logistic regression.</p>
<p><strong>Observation Independence:</strong> Observations should be independent of each other. This is more of a study design issue than something you would check with a statistical test.</p>
<p><strong>No Multicollinearity:</strong> Just like in linear regression, the independent variables should not be highly correlated with each other.</p>
<p>Just like in linear regression, a rule of thumb is that if the VIF is greater than 5 (or sometimes 10), then the multicollinearity is high.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking for Multicollinearity:</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">check_collinearity</span>(mv_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Linearity of Log Odds:</strong> While logistic regression does not assume linearity of the relationship between the independent variables and the dependent variable, it does assume linearity of independent variables and the log odds.</p>
<p><strong>Checking for Linearity of Log Odds:</strong></p>
<p>Logistic regression assumes that the log odds of the outcome is a linear combination of the independent variables. This is a complex assumption to check, but one approach is to look for significant interactions between your predictors and the log odds.</p>
<p>First, fit a model that allows for the possibility of a non-linear relationship:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>logit_model_2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> predictor <span class="sc">+</span> <span class="fu">I</span>(predictor<span class="sc">^</span><span class="dv">2</span>), <span class="at">family=</span>binomial, <span class="at">data=</span>df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then compare this model with your original model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(logit_model, logit_model_2, <span class="at">test=</span><span class="st">"Chisq"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If the model with the quadratic term is significantly better than the model without (i.e., p &lt; 0.05), this could be a sign that the assumption of linearity of the log odds has been violated.</p>
</section>
</section>
<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>Material for this lecture was borrowed and adopted from</p>
<ul>
<li><p><a href="https://epirhandbook.com/en/index.html">The Epidemiologist R Handbook</a></p></li>
<li><p><a href="https://rafalab.github.io/dsbook" class="uri">https://rafalab.github.io/dsbook</a></p>
<p><img src="../images/bing-bang-boom-snapping.gif" class="img-fluid"></p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>